<!DOCTYPE html>
<html>
<head>
    <title>Project Folders</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../dikugroup6.github.io/dist/output.css" rel="stylesheet">

    <script>
        const base_url = 'https://dikugroup6.github.io';
        const api_url = 'https://api.github.com/repos/dikugroup6/dikugroup6.github.io/contents/reports';

        window.onload = function() {
            fetch(api_url) // replace with the path to the current directory
                .then(response => response.json())
                .then(reports => {
                    console.log(reports);
                    const container = document.getElementById('folders-container');
                    reports.sort((a, b) => a.name < b.name ? -1 : 1).forEach(report => {
                        const card = document.createElement('div')
                        card.className += "p-6 bg-white border border-gray-200 rounded-lg shadow"

                        const cardBody = document.createElement('div')
                        cardBody.className += "mb-2"

                        const title = document.createElement('h5')
                        title.className += "text-lg font-bold text-blue-400 border-b-2"
                        const titleText = document.createTextNode(report.name);
                        title.appendChild(titleText);

                        const text = document.createElement('p')
                        text.className += ""
                        text.innerHTML = `<strong>Path:</strong> ${report.path}<br><strong>Size:</strong> ${report.size}<br><strong>Type:</strong> ${report.type}<br><strong>GitHub URL:</strong> ${report.html_url}`


                        const button = document.createElement('button')
                        button.textContent = "View report"
                        button.className += "bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded"
                        button.addEventListener('click', () => {
                            window.location.href = `${base_url}/${report.path}`;
                        });

                        cardBody.appendChild(title);
                        cardBody.appendChild(text);
                        card.appendChild(cardBody);
                        card.appendChild(button);
                        container.appendChild(card);
                    });

                });
        };
    </script>
</head>
<body>

<div class="p-6 flex flex-col justify-center items-center">
    <h1 class="text-3xl font-bold">Breakout Code Coverage Reports!</h1>
    <div id="folders-container" class="grid grid-cols-2 gap-2"></div>
</div>

</body>
</html>
